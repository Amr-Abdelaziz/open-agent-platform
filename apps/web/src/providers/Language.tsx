"use client";

import React, { createContext, useContext, useState, useEffect } from "react";

type Language = "en" | "ar";
type Direction = "ltr" | "rtl";

interface LanguageContextType {
    language: Language;
    direction: Direction;
    setLanguage: (lang: Language) => void;
    t: (key: string) => string;
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

const translations: Record<Language, Record<string, string>> = {
    en: {
        chat: "Chat",
        agents: "Agents",
        tools: "Tools",
        rag: "RAG",
        history: "History",
        settings: "Settings",
        signin: "Sign In",
        signup: "Sign Up",
        logout: "Log Out",
        theme: "Theme",
        language: "Language",
        neural_node_management: "Organization Assistants",
        active_nodes: "Active Nodes",
        synchronize_nodes: "Synchronize local and remote processing units to the Gorbit network.",
        no_collections: "No Collections Found",
        initialize_orbital_node: "Initialize Organization Collection",
        documents: "Documents",
        orbital_resource: "Organization resource management",
        chat_with_satellite: "Chat with Satellite",
        type_message: "Type your message...",
        send: "Send",
        cancel: "Cancel",
        admin: "Admin",
        organization: "Organization",
        ai_interface: "AI Interface",
        welcome_message: "Welcome to Gorbit. Access your Organization's AI by selecting your authorized agent.",
        start_chat: "Start Chat",
        select_agent: "Select an agent...",
        no_agent_found: "No agent found.",
        search_agents: "Search agents...",
        loading_agents: "Loading agents...",
        default_label: "Default",
        rag_knowledge_base: "Gorbit Knowledge Base",
        collections: "Collections",
        storage: "Storage",
        tasks: "Tasks",
        converter: "Converter",
        pdf_to_md: "PDF to MD",
        select_collection_tasks: "Please select a collection to view tasks",
        creating_collection: "Creating collection",
        deleting_collection: "Deleting collection",
        updating_collection: "Updating collection",
        collection_created: "Collection created successfully",
        collection_deleted: "Collection deleted successfully",
        collection_updated: "Collection updated successfully",
        collection_exists: "Collection named '{name}' could not be created (likely already exists).",
        no_collections_remaining: "No collections remaining.",
        rag_experience_message: "Experience the power of Gorbit RAG by creating your first collection. Organize your documents in organization collections for efficient retrieval.",
        websites: "Websites",
        upload_file: "Upload File",
        add_text: "Add Text",
        crawl_website: "Crawl Website",
        drag_drop_files: "Drag and drop files here or click to browse",
        select_files: "Select Files",
        files_to_upload: "Files to Upload:",
        upload_count_files: "Upload {count} File(s)",
        paste_type_text: "Paste or type your text here...",
        add_text_document: "Add Text Document",
        crawled_websites: "Crawled Websites",
        uploading_files: "Uploading files",
        files_uploaded_success: "Files uploaded successfully",
        uploading_text_document: "Uploading text document",
        text_document_uploaded_success: "Text document uploaded successfully",
        no_collection_selected: "No collection selected",
        chat_with_docs_description: "Please select a collection to chat with documents.",
        unsupported_file_types: "Unsupported file types: {names}. Please use PDF, TXT, or HTML.",
        enter_url: "Please enter a URL to crawl",
        starting_crawl: "Starting crawl operation...",
        crawl_started_success: "Crawl started successfully!",
        failed_start_crawl: "Failed to start crawl",
        seed_url: "Seed URL",
        starting_point_scout: "The starting point for the orbital scout.",
        crawl_type: "Crawl Type",
        website: "Website",
        sitemap: "Sitemap",
        documentation: "Documentation",
        max_pages: "Max Pages",
        max_depth: "Max Depth",
        concurrent_requests: "Concurrent Requests",
        skip_discovery: "Skip Discovery",
        skip_discovery_description: "Only crawl the provided URL(s) without finding new ones.",
        engaging_orbital_scout: "Engaging Orbital Scout...",
        start_crawl: "Start Crawl",
        document_name: "Document Name",
        status: "Status",
        date_uploaded: "Date Uploaded",
        actions: "Actions",
        no_documents_found: "No documents found in this collection.",
        untitled: "Untitled",
        embedded: "Embedded",
        pending: "Pending",
        view_preview: "View Preview",
        view_pdf: "View PDF",
        process_embed: "Process & Embed",
        delete: "Delete",
        are_you_sure: "Are you absolutely sure?",
        action_undone_delete: "This action cannot be undone. This will permanently delete the document {name}.",
        global_asset_browser: "Global Asset Browser",
        processing_settings: "Processing Settings",
        upload_convert: "Upload & Convert",
        search_files: "Search files...",
        directory: "Directory",
        file: "File",
        convert_chunk: "Convert & Chunk",
        empty_workspace: "Empty Workspace",
        no_matching_records: "No matching records found",
        fetching_asset_contents: "Fetching asset contents...",
        preview_not_available: "Preview Not Available",
        cannot_render_directly: "This file type cannot be rendered directly",
        failed_load_storage: "Failed to load storage items",
        downloaded_item: "Downloaded {name}",
        download_failed: "Download failed",
        preview_failed: "Preview failed",
        copied_clipboard: "Copied to clipboard",
        delete_failed: "Delete failed",
        deleted_item: "Deleted {name}",
        select_collection_first: "Please select a collection first",
        docs_need_collection: "Documents and chunks need to be stored in a collection.",
        initiating_hybrid_chunking: "Initiating hybrid chunking for {name}...",
        processing_started: "Processing started for {name}",
        upload_successful: "Upload successful",
        starting_conversion: "Starting conversion...",
        upload_conversion_started: "{name} uploaded and conversion started",
        settings_saved_db: "Settings saved to database",
        pdf_to_md_converter: "PDF to MD Converter",
        extract_markdown_pdf: "Extract clean markdown from any PDF using Granite Vision.",
        drag_drop_pdf: "Drag and drop a PDF file",
        choose_file: "Choose File",
        max_pages_process: "Max Pages to Process (Optional)",
        all_pages: "All pages",
        convert_to_markdown: "Convert to Markdown",
        converting: "Converting...",
        preview: "Preview",
        converting_document_markdown: "Converting document to markdown...",
        converted_content_appear: "Converted content will appear here",
        select_pdf_file: "Please select a PDF file",
        conversion_successful: "Conversion successful",
        conversion_empty: "Conversion returned empty content",
        change_file: "Change File",
        search_websites: "Search websites...",
        failed_sync_orbital: "Failed to sync orbital database",
        purge_website_confirm: "Are you sure you want to delete all data for {name}? This includes all {count} pages, chunks, and embeddings.",
        purging_orbital: "Purging {name} from orbital banks...",
        website_purged_success: "Website data purged successfully",
        failed_purge_website: "Failed to purge website data",
        failed_load_orbital: "Failed to load orbital data",
        page_content_copied: "Page content copied to clipboard",
        select_collection_view_crawled: "Select a collection to view crawled websites",
        no_crawl_sources: "No crawl sources found in this sector",
        crawl_progress: "Crawl Progress",
        pages_discovered: "pages discovered",
        last_sync: "Last sync:",
        purge_all_data: "Purge All Data",
        crawled_pages_count: "Crawled Pages ({count})",
        untitled_page: "Untitled Page",
        visit_original: "Visit Original",
        decrypting_orbital: "Decrypting Orbital Data...",
        syncing_orbital: "Syncing with orbital banks...",
        character_count: "Character Count",
        discovery_date: "Discovery Date",
        no_decrypted_content: "No decrypted content available for this node",
        return: "Return",
        abort_mission: "Aborting mission...",
        crawl_cancel_requested: "Crawl cancellation requested",
        failed_cancel_crawl: "Failed to cancel crawl",
        defragmenting_mission: "Defragmenting mission records...",
        mission_record_purged: "Mission record purged",
        failed_delete_mission: "Failed to delete mission",
        source_id_not_found: "Source ID not found for this mission",
        completed: "Completed",
        failed: "Failed",
        in_progress: "In Progress",
        cancelled: "Cancelled",
        recent_tasks: "Recent Tasks",
        sync: "Sync",
        target: "Target",
        no_crawled_websites: "No crawled websites yet.",
        progress: "Progress",
        processing_config: "Processing Config",
        core_engine: "Core Engine",
        pdf_backend: "PDF Backend",
        pipeline: "Pipeline",
        abort_on_error: "Abort on Error",
        document_range: "Document Range",
        start_page: "Start Page",
        end_page: "End Page",
        ocr_vision: "OCR & Vision",
        ocr_engine: "OCR Engine",
        images: "Images",
        enable_ocr: "Enable OCR",
        force_ocr: "Force OCR",
        include_images: "Include Images",
        classification: "Classification",
        pic_description: "Pic Description",
        vlm_models: "VLM Models",
        pipeline_model_preset: "Pipeline Model (Preset)",
        vlm_model_api: "VLM Model API",
        layout_tables: "Layout & Tables",
        table_mode: "Table Mode",
        doc_scale: "Doc Scale",
        extract_tables: "Extract Tables",
        code_discovery: "Code Discovery",
        strategy: "Strategy",
        tokenizer_embedding: "Tokenizer / Embedding",
        max_tokens: "Max Tokens",
        merge_chunks: "Merge Chunks",
        saving_config: "Saving Configuration...",
        save_settings_db: "Save Settings to Database",
        syncing_ollama_models: "Synchronizing Ollama models...",
        ai_document_converter: "AI Document Converter",
        high_fidelity_document_understanding: "High-fidelity document understanding using IBM Granite Vision models.",
        drag_drop_images_pdfs: "Drag and drop images or PDFs here",
        supported_formats_converter: "Supports JPG, PNG, WEBP, and PDF",
        staged_files: "Staged Files",
        clear_all: "Clear all",
        convert_with_granite_vision: "Convert with Granite Vision",
        processing: "Processing...",
        select_collection_enable_conversion: "Please select a collection to enable conversion",
        some_files_filtered_supported: "Some files were filtered out. Supported: PDF, JPG, PNG, WEBP.",
        no_files_staged: "No files staged for processing",
        active: "Active",
        embedding_model_settings: "Embedding Model Settings",
        ollama_instance: "Ollama Instance",
        live: "Live",
        warn: "Warn",
        fail: "Fail",
        system_health_report: "System Health Report",
        all_synced_responsive: "All organization collections are currently synchronized and responsive.",
        signal_interference_detected: "Signal Interference Detected:",
        transmission_failed: "Transmission failed",
        system_critical_failure: "System critical failure. No active communication channels found.",
        continuous_monitoring_active: "Continuous monitoring active...",
        create_new_collection: "Create New Collection",
        enter_name_collection: "Enter a name for your new collection.",
        name: "Name",
        description: "Description",
        characters: "characters",
        description_exceeds_max: "Description exceeds the maximum length of {count} characters.",
        create_label: "Create",
        delete_collection: "Delete Collection",
        delete_collection_confirm: "Are you sure you want to delete the collection \"{name}\"? This will also delete all associated documents.",
        edit: "Edit",
        edit_collection: "Edit Collection",
        edit_name_description: "Edit the name and description for your collection.",
        save_changes: "Save Changes",
        delete_task_confirm: "Are you sure you want to delete this task record from the database?",
        stop_all_tasks_confirm: "Are you sure you want to stop all running conversion tasks?",
        clear_results_confirm: "Are you sure you want to clear all processing results from memory?",
        conversion_tasks: "Conversion Tasks",
        stop_all: "Stop All",
        clear_results: "Clear Results",
        file_asset: "File Asset",
        timeline: "Timeline",
        no_active_conversion_threads: "No active conversion threads",
        view_result_json: "View Result JSON",
        result_collected_stored: "Result collected and stored in DB. Check console for full JSON.\n\nChunks: ",
        pagination_previous: "Previous",
        pagination_next: "Next",
        document_preview: "Document Preview",
        preview_uploaded_content: "Preview the contents of your uploaded document",
        raw: "Raw",
        markdown: "Markdown",
        pdf: "PDF",
        chunks_count: "Chunks ({count})",
        print_as_pdf: "Print as PDF",
        assembling_chunks: "Assembling document chunks...",
        no_content_available: "No content available.",
        pdf_preview: "PDF Preview",
        generated_preview: "Generated Preview",
        platform_name: "Gorbit RAG",
        high_fidelity_layout_notice: "Showing a generated high-fidelity layout. Original PDF source not directly accessible.",
        no_chunks_discovered: "No chunks discovered for this document.",
        chunk_number: "Chunk #{number}",
        characters_count: "{count} characters",
        select_type: "Select Type",
        close: "Close",
        copy_content: "Copy Content",
        copied: "Copied!",
        word_count: "Word Count",
        view_source: "View Source",
        standard: "Standard",
        loading: "Loading...",
        select_model: "Select Model",
        mutually_exclusive_preset: "Mutually exclusive with preset",
        file_preview: "File Preview",
        preview_mode: "Preview Mode",
        search_crawled_pages: "Search crawled pages...",
        no_pages_found: "No pages found",
        words: "words",
        page_preview: "Page Preview",
        created_label: "Created",
        decompressing_page_content: "Decompressing page content...",
        close_preview: "Close Preview",
        page_deleted_success: "Page deleted successfully",
        failed_delete_page: "Failed to delete page",
        delete_page_confirm: "Are you sure you want to delete this crawled page? This will also remove its associated chunks and embeddings.",
    },
    ar: {
        chat: "المحادثة",
        agents: "الوكلاء",
        tools: "الأدوات",
        rag: "قاعدة المعرفة",
        history: "السجل",
        settings: "الإعدادات",
        signin: "تسجيل الدخول",
        signup: "إنشاء حساب",
        logout: "تسجيل الخروج",
        theme: "المظهر",
        language: "اللغة",
        neural_node_management: "إدارة العقد العصبية",
        active_nodes: "العقد النشطة",
        synchronize_nodes: "مزامنة وحدات المعالجة المحلية والبعيدة مع شبكة جوربيت.",
        no_collections: "لم يتم العثور على مجموعات",
        initialize_orbital_node: "تهيئة عقدة مدارية",
        documents: "المستندات",
        orbital_resource: "إدارة المصادر ",
        chat_with_satellite: "تحدث مع القمر الصناعي",
        type_message: "اكتب رسالتك...",
        send: "إرسال",
        cancel: "إلغاء",
        admin: "الإدارة",
        organization: "الهيكل التنظيمي",
        ai_interface: "واجهة الذكاء الاصطناعي",
        welcome_message: "مرحباً بك في جوربيت. يمكنك الوصول إلى الذكاء الاصطناعي الخاص بمؤسستك عن طريق اختيار وكيلك المعتمد.",
        start_chat: "بدء المحادثة",
        select_agent: "اختر وكيلاً...",
        no_agent_found: "لم يتم العثور على وكلاء.",
        search_agents: "البحث عن وكلاء...",
        loading_agents: "جاري تحميل الوكلاء...",
        default_label: "افتراضي",
        rag_knowledge_base: "قاعدة معرفة جوربيت",
        collections: "المجموعات",
        storage: "التخزين",
        tasks: "المهام",
        converter: "المحول",
        pdf_to_md: "PDF إلى MD",
        select_collection_tasks: "يرجى اختيار مجموعة لعرض المهام",
        creating_collection: "جاري إنشاء المجموعة",
        deleting_collection: "جاري حذف المجموعة",
        updating_collection: "جاري تحديث المجموعة",
        collection_created: "تم إنشاء المجموعة بنجاح",
        collection_deleted: "تم حذف المجموعة بنجاح",
        collection_updated: "تم تحديث المجموعة بنجاح",
        collection_exists: "تعذر إنشاء المجموعة باسم '{name}' (من المحتمل أنها موجودة بالفعل).",
        no_collections_remaining: "لم يتبق أي مجموعات.",
        rag_experience_message: "اختبر قوة Gorbit RAG من خلال إنشاء مجموعتك الأولى. قم بتنظيم مستنداتك في مجموعات مؤسسية لاسترجاعها بكفاءة.",
        websites: "المواقع الإلكترونية",
        upload_file: "رفع ملف",
        add_text: "إضافة نص",
        crawl_website: "زحف موقع إلكتروني",
        drag_drop_files: "اسحب الملفات وأفلتها هنا أو انقر للتصفح",
        select_files: "اختيار الملفات",
        files_to_upload: "ملفات للرفع:",
        upload_count_files: "رفع {count} ملف(ات)",
        paste_type_text: "قم بلصق النص أو كتابته هنا...",
        add_text_document: "إضافة مستند نصي",
        crawled_websites: "المواقع التي تم زحفها",
        uploading_files: "جاري رفع الملفات",
        files_uploaded_success: "تم رفع الملفات بنجاح",
        uploading_text_document: "جاري رفع المستند النصي",
        text_document_uploaded_success: "تم رفع المستند النصي بنجاح",
        no_collection_selected: "لم يتم اختيار مجموعة",
        chat_with_docs_description: "يرجى اختيار مجموعة للتحدث مع المستندات.",
        unsupported_file_types: "أنواع ملفات غير مدعومة: {names}. يرجى استخدام PDF أو TXT أو HTML.",
        enter_url: "يرجى إدخال عنوان URL للزحف",
        starting_crawl: "بدء عملية الزحف...",
        crawl_started_success: "تم بدء عملية الزحف بنجاح!",
        failed_start_crawl: "فشل بدء عملية الزحف",
        seed_url: "رابط البداية",
        starting_point_scout: "نقطة البداية للمستكشف المداري.",
        crawl_type: "نوع الزحف",
        website: "موقع إلكتروني",
        sitemap: "خريطة الموقع",
        documentation: "التوثيق",
        max_pages: "أقصى عدد من الصفحات",
        max_depth: "أقصى عمق",
        concurrent_requests: "الطلبات المتزامنة",
        skip_discovery: "تخطي الاكتشاف",
        skip_discovery_description: "الزحف فقط إلى العناوين المزودة دون البحث عن عناوين جديدة.",
        engaging_orbital_scout: "جاري تشغيل المستكشف المداري...",
        start_crawl: "بدء الزحف",
        document_name: "اسم المستند",
        status: "الحالة",
        date_uploaded: "تاريخ الرفع",
        actions: "الإجراءات",
        no_documents_found: "لم يتم العثور على مستندات في هذه المجموعة.",
        untitled: "بدون عنوان",
        embedded: "تم التضمين",
        pending: "قيد الانتظار",
        view_preview: "عرض المعاينة",
        view_pdf: "عرض PDF",
        process_embed: "معالجة وتضمين",
        delete: "حذف",
        are_you_sure: "هل أنت متأكد تماماً؟",
        action_undone_delete: "هذا الإجراء لا يمكن التراجع عنه. سيتم حذف المستند {name} نهائياً.",
        global_asset_browser: "متصفح الأصول العالمي",
        processing_settings: "إعدادات المعالجة",
        upload_convert: "رفع وتحويل",
        search_files: "البحث عن ملفات...",
        directory: "مجلد",
        file: "ملف",
        convert_chunk: "تحويل وتقسيم",
        empty_workspace: "بيئة عمل فارغة",
        no_matching_records: "لم يتم العثور على سجلات مطابقة",
        failed_load_storage: "فشل في تحميل عناصر التخزين",
        downloaded_item: "تم تحميل {name}",
        download_failed: "فشل التحميل",
        preview_failed: "فشلت المعاينة",
        copied_clipboard: "تم النسخ إلى الحافظة",
        delete_failed: "فشل الحذف",
        deleted_item: "تم حذف {name}",
        select_collection_first: "يرجى اختيار مجموعة أولاً",
        docs_need_collection: "المستندات والأجزاء يجب أن تخزن في مجموعة.",
        initiating_hybrid_chunking: "بدء التقسيم الهجين لـ {name}...",
        processing_started: "بدأت المعالجة لـ {name}",
        upload_successful: "تم الرفع بنجاح",
        starting_conversion: "بدء التحويل...",
        upload_conversion_started: "تم رفع {name} وبدء التحويل",
        settings_saved_db: "تم حفظ الإعدادات في قاعدة البيانات",
        pdf_to_md_converter: "محول PDF إلى MD",
        extract_markdown_pdf: "استخراج مارك داون نظيف من أي ملف PDF باستخدام قرانيت فيجن.",
        drag_drop_pdf: "اسحب وأفلت ملف PDF",
        choose_file: "اختيار ملف",
        max_pages_process: "أقصى عدد من الصفحات للمعالجة (اختياري)",
        all_pages: "كل الصفحات",
        convert_to_markdown: "التحويل إلى مارك داون",
        converting: "جاري التحويل...",
        preview: "المعاينة",
        converting_document_markdown: "جاري تحويل المستند إلى مارك داون...",
        converted_content_appear: "سيظهر المحتوى المحول هنا",
        select_pdf_file: "يرجى اختيار ملف PDF",
        conversion_successful: "تم التحويل بنجاح",
        conversion_empty: "التحويل أعاد محتوى فارغاً",
        change_file: "تغيير الملف",
        search_websites: "البحث عن المواقع الإلكترونية...",
        failed_sync_orbital: "فشل في مزامنة قاعدة البيانات ",
        purge_website_confirm: "هل أنت متأكد من رغبتك في حذف جميع البيانات لـ {name}؟ يتضمن ذلك جميع الصفحات ({count} صفحة)، والأجزاء، والتضمينات.",
        purging_orbital: "جاري مسح {name} من البنوك ...",
        website_purged_success: "تم مسح بيانات الموقع بنجاح",
        failed_purge_website: "فشل في مسح بيانات الموقع",
        failed_load_orbital: "فشل في تحميل البيانات ",
        page_content_copied: "تم نسخ محتوى الصفحة إلى الحافظة",
        select_collection_view_crawled: "اختر مجموعة لعرض المواقع التي تم الزحف إليها",
        no_crawl_sources: "لم يتم العثور على مصادر زحف في هذا القطاع",
        crawl_progress: "تقدم الزحف",
        pages_discovered: "صفحات تم اكتشافها",
        last_sync: "آخر مزامنة:",
        purge_all_data: "مسح جميع البيانات",
        crawled_pages_count: "الصفحات الزاحفة ({count})",
        untitled_page: "صفحة بدون عنوان",
        visit_original: "زيارة الأصل",
        decrypting_orbital: "جاري فك تشفير البيانات المدارية...",
        syncing_orbital: "جاري المزامنة مع البنوك المدارية...",
        character_count: "عدد الحروف",
        discovery_date: "تاريخ الاكتشاف",
        no_decrypted_content: "لا يتوفر محتوى مفكوك التشفير لهذه العقدة",
        return: "عودة",
        abort_mission: "إحباط المهمة...",
        crawl_cancel_requested: "تم طلب إلغاء الزحف",
        failed_cancel_crawl: "فشل في إلغاء الزحف",
        defragmenting_mission: "جاري إلغاء تجزئة سجلات المهمة...",
        mission_record_purged: "تم مسح سجل المهمة",
        failed_delete_mission: "فشل في حذف المهمة",
        source_id_not_found: "معرف المصدر غير موجود لهذه المهمة",
        completed: "مكتمل",
        failed: "فشل",
        in_progress: "قيد التنفيذ",
        cancelled: "ملغى",
        recent_tasks: "المهام الأخيرة",
        sync: "مزامنة",
        target: "الهدف",
        no_crawled_websites: "لا توجد مواقع تم الزحف إليها بعد.",
        progress: "التقدم",
        processing_config: "تكوين المعالجة",
        core_engine: "المحرك الأساسي",
        pdf_backend: "محرك PDF الخلفي",
        pipeline: "المسار",
        abort_on_error: "إحباط عند حدوث خطأ",
        document_range: "نطاق المستند",
        start_page: "صفحة البداية",
        end_page: "صفحة النهاية",
        ocr_vision: "التعرف الضوئي والرؤية",
        ocr_engine: "محرك التعرف الضوئي",
        images: "الصور",
        enable_ocr: "تفعيل التعرف الضوئي",
        force_ocr: "إجبار التعرف الضوئي",
        include_images: "تضمين الصور",
        classification: "تصنيف",
        pic_description: "وصف الصور",
        vlm_models: "نماذج VLM",
        pipeline_model_preset: "نموذج المسار (مسبق الضبط)",
        vlm_model_api: "واجهة برمجة تطبيقات نموذج VLM",
        layout_tables: "التخطيط والجداول",
        table_mode: "وضع الجداول",
        doc_scale: "مقياس المستند",
        extract_tables: "استخراج الجداول",
        code_discovery: "اكتشاف الكود",
        strategy: "الإستراتيجية",
        tokenizer_embedding: "المحلل / التضمين",
        max_tokens: "أقصى عدد من الرموز",
        merge_chunks: "دمج الأجزاء",
        saving_config: "جاري حفظ التكوين...",
        save_settings_db: "حفظ الإعدادات في قاعدة البيانات",
        syncing_ollama_models: "جاري مزامنة نماذج Ollama...",
        ai_document_converter: "محول المستندات بالذكاء الاصطناعي",
        high_fidelity_document_understanding: "فهم المستندات بدقة عالية باستخدام نماذج IBM Granite Vision.",
        drag_drop_images_pdfs: "اسحب وأفلت الصور أو ملفات PDF هنا",
        supported_formats_converter: "يدعم JPG، PNG، WEBP، و PDF",
        staged_files: "الملفات المرحلية",
        clear_all: "مسح الكل",
        convert_with_granite_vision: "تحويل باستخدام Granite Vision",
        processing: "جاري المعالجة...",
        select_collection_enable_conversion: "يرجى اختيار مجموعة لتمكين التحويل",
        some_files_filtered_supported: "تمت تصفية بعض الملفات. الصيغ المدعومة: PDF، JPG، PNG، WEBP.",
        no_files_staged: "لا توجد ملفات مرحلية للمعالجة",
        active: "نشط",
        embedding_model_settings: "إعدادات نموذج التضمين",
        ollama_instance: "نسخة Ollama",
        live: "مباشر",
        warn: "تحذير",
        fail: "فشل",
        system_health_report: "تقرير صحة النظام",
        all_synced_responsive: "جميع مجموعات المؤسسة متزامنة ومستجيبة حالياً.",
        signal_interference_detected: "تم اكتشاف تداخل في الإشارة:",
        transmission_failed: "فشل الإرسال",
        system_critical_failure: "فشل حرج في النظام. لم يتم العثور على قنوات اتصال نشطة.",
        continuous_monitoring_active: "المراقبة المستمرة نشطة...",
        create_new_collection: "إنشاء مجموعة جديدة",
        enter_name_collection: "أدخل اسماً لمجموعتك الجديدة.",
        name: "الاسم",
        description: "الوصف",
        characters: "حرف",
        description_exceeds_max: "الوصف يتجاوز الحد الأقصى للطول وهو {count} حرف.",
        create_label: "إنشاء",
        delete_collection: "حذف المجموعة",
        delete_collection_confirm: "هل أنت متأكد من رغبتك في حذف المجموعة \"{name}\"؟ سيؤدي ذلك أيضاً إلى حذف جميع المستندات المرتبطة بها.",
        edit: "تعديل",
        edit_collection: "تعديل المجموعة",
        edit_name_description: "تعديل الاسم والوصف لمجموعتك.",
        save_changes: "حفظ التغييرات",
        delete_task_confirm: "هل أنت متأكد من رغبتك في حذف سجل هذه المهمة من قاعدة البيانات؟",
        stop_all_tasks_confirm: "هل أنت متأكد من رغبتك في إيقاف جميع مهام التحويل الجارية؟",
        clear_results_confirm: "هل أنت متأكد من رغبتك في مسح جميع نتائج المعالجة من الذاكرة؟",
        conversion_tasks: "مهام التحويل",
        stop_all: "إيقاف الكل",
        clear_results: "مسح النتائج",
        file_asset: "أصل الملف",
        timeline: "الجدول الزمني",
        no_active_conversion_threads: "لا توجد خيوط تحويل نشطة",
        view_result_json: "عرض نتيجة JSON",
        result_collected_stored: "تم جمع النتيجة وتخزينها في قاعدة البيانات. تحقق من وحدة التحكم لملف JSON الكامل.\n\nالأجزاء: ",
        pagination_previous: "السابق",
        pagination_next: "التالي",
        document_preview: "معاينة المستند",
        preview_uploaded_content: "معاينة محتويات المستند المرفوع",
        raw: "خام",
        markdown: "مارك داون",
        pdf: "بي دي إف",
        chunks_count: "الأجزاء ({count})",
        print_as_pdf: "طباعة كـ PDF",
        assembling_chunks: "جاري تجميع أجزاء المستند...",
        no_content_available: "لا يتوفر محتوى.",
        pdf_preview: "معاينة PDF",
        generated_preview: "معاينة مولدة",
        platform_name: "جوربيت RAG",
        high_fidelity_layout_notice: "عرض تخطيط عالي الدقة تم توليده. لا يمكن الوصول مباشرة إلى مصدر PDF الأصلي.",
        no_chunks_discovered: "لم يتم اكتشاف أي أجزاء لهذا المستند.",
        chunk_number: "الجزء رقم {number}",
        characters_count: "{count} حرف",
        select_type: "اختر النوع",
        close: "إغلاق",
        copy_content: "نسخ المحتوى",
        copied: "تم النسخ!",
        word_count: "عدد الكلمات",
        view_source: "عرض المصدر",
        standard: "قياسي",
        loading: "جاري التحميل...",
        select_model: "اختر النموذج",
        mutually_exclusive_preset: "يستثنى الطرف الآخر مع الضبط المسبق",
        file_preview: "معاينة الملف",
        preview_mode: "وضع المعاينة",
        search_crawled_pages: "البحث في الصفحات الزاحفة...",
        no_pages_found: "لم يتم العثور على صفحات",
        words: "كلمات",
        page_preview: "معاينة الصفحة",
        created_label: "تم الإنشاء",
        decompressing_page_content: "جاري فك ضغط محتوى الصفحة...",
        close_preview: "إغلاق المعاينة",
        page_deleted_success: "تم حذف الصفحة بنجاح",
        failed_delete_page: "فشل في حذف الصفحة",
        delete_page_confirm: "هل أنت متأكد من رغبتك في حذف هذه الصفحة الزاحفة؟ سيؤدي ذلك أيضاً إلى إزالة الأجزاء والتضمينات المرتبطة بها.",
    },
};

export function LanguageProvider({ children }: { children: React.ReactNode }) {
    const [language, setLanguageState] = useState<Language>("en");
    const [direction, setDirection] = useState<Direction>("ltr");

    useEffect(() => {
        const savedLang = localStorage.getItem("language") as Language;
        if (savedLang && (savedLang === "en" || savedLang === "ar")) {
            setLanguageState(savedLang);
            setDirection(savedLang === "ar" ? "rtl" : "ltr");
            document.documentElement.dir = savedLang === "ar" ? "rtl" : "ltr";
            document.documentElement.lang = savedLang;
        }
    }, []);

    const setLanguage = (lang: Language) => {
        setLanguageState(lang);
        setDirection(lang === "ar" ? "rtl" : "ltr");
        localStorage.setItem("language", lang);
        document.documentElement.dir = lang === "ar" ? "rtl" : "ltr";
        document.documentElement.lang = lang;
    };

    const t = (key: string) => {
        return translations[language][key] || key;
    };

    return (
        <LanguageContext.Provider value={{ language, direction, setLanguage, t }}>
            {children}
        </LanguageContext.Provider>
    );
}

export function useLanguage() {
    const context = useContext(LanguageContext);
    if (!context) {
        throw new Error("useLanguage must be used within a LanguageProvider");
    }
    return context;
}
